.. _200906_how_to_connect_2_routers_in_home_networking:

如何在家庭网络中使用两台路由器？
===================================================

`ruanyifeng.com <http://www.ruanyifeng.com/blog/2009/06/how_to_connect_2_routers_in_home_networking.html>`__

买\ `EeePC <http://www.ruanyifeng.com/blog/2009/05/eeepc_900a.html>`__\ 的时候，我还顺便买了一台无线路由器。

买回来以后，就遇到一个问题：我家已经有一台路由器了，怎样才能再加一台进去呢？

网上查到的资料，都写得太专业，对像我这样的业余人士用处不大。我反复设置各种参数，整整花了一个晚上，才算安装成功。下面就是一些设置要点，我记录下来备忘，希望对其他朋友有用。


==================

先说一下我家的网络情况。

如上图所示，我家使用ADSL上网。ADSL
Modem直接连电话线，后面跟了一台路由器。然后，拉了两根线，一根供大房间里的PC上网，另一根拉到我的房间，接上一个交换机，供我的台式机和笔记本上网。我想做的就是，用无线路由器替换掉那个交换机。

当然，最简单的方法，就是关闭无线路由器的路由功能，把它变成一个无线交换机，这样就什么都不用设置了。可是，我买的这一台，系统里好像没有这个选项，迫不得已只好走麻烦的另一条路。

**第一步，用交叉线将两个路由器连起来。**

这点很关键，却很容易忽略。我就是因为忘了这一点，导致怎么设置都不通，最后才想起来要用交叉线。

顺便记录一下，正常的直通线的排线顺序是”白橙、橙、白绿、蓝、白蓝、绿、白棕、棕”，交叉线的顺序则是”白绿、绿、白橙、蓝、白蓝、橙、白棕、棕”。

**第二步，设置第二台路由器的外网IP地址。**

由于路由器起到连接两个网络的作用，所以需要两个IP地址，一个是对外的，另一个是对内的。

通常，第一台路由器的IP地址是”192.168.1.1”，子网掩码是”255.255.255.0”。那么，第二台路由器的外网IP地址必须保证同第一台在同一个网段中，也就是说必须设成”192.168.1.x”（x是2到254之间的一个整数）。

如果第二台路由器的外网IP地址不设为静态地址，那就要设成自动获取，即由第一台路由器通过DHCP协议自动分配。

**第三步，设置第二台路由器的内网IP地址。**

内网IP地址是针对这个路由器下面的所有设备的。将来登录修改路由器设置，都要用到这个IP。

我的设置是”192.168.2.1”，子网掩码是”255.255.255.0”。

**第四步，设置所有通过第二台路由器上网的设备。**

其实，这一步是不用设置的。因为一般情况下，操作系统默认自动获取IP地址。这是最佳选择，最好不要修改。如果一定要设置成静态IP，则必须是”192.168.2.x”（x是2到254之间的一个整数），子网掩码”255.255.255.0”，网关”192.168.2.1”，DNS”192.168.1.1”。

好了，到了这一步就应该可以正常上网了。看起来好像很简单，5分钟就能搞定，我可是花了4个小时才琢磨出来的。

（完）

.. note::
    原文地址: http://www.ruanyifeng.com/blog/2009/06/how_to_connect_2_routers_in_home_networking.html 
    作者: 阮一峰 

    编辑: 木书架 http://www.me115.com