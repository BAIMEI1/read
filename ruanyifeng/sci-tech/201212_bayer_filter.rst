.. _201212_bayer_filter:

为什么数码相机可以拍出彩色照片？
===================================================

`ruanyifeng.com <http://www.ruanyifeng.com/blog/2012/12/bayer_filter.html>`__

上个月（11月13日），83岁的柯达公司退休工程师\ `布赖斯·拜尔 <http://www.nytimes.com/2012/11/29/business/bryce-bayer-inventor-of-a-filter-to-make-color-digital-pictures-dies-at-83.html>`__\ （Bryce
Bayer）去世。

一家国内\ `杂志 <http://magazine.caixin.com/>`__\ 邀请我写纪念文章，回顾他对数码摄影的巨大贡献。

我看了一些材料，觉得这个题材很有意思，涉及数码相机的成像原理，使我对数字图像技术有了新的认识。但是，由于体例限制，杂志不允许我插入彩图。

下面，我把我的那篇文章配上图片，解释彩色数码照片是怎么拍出来的。

1.

为了更好地理解原理，让我们从照片的起源讲起。1825年，法国人\ `涅普斯 <http://zh.wikipedia.org/wiki/%E7%B4%84%E7%91%9F%E5%A4%AB%C2%B7%E5%B0%BC%E5%A1%9E%E7%A6%8F%E7%88%BE%C2%B7%E6%B6%85%E6%99%AE%E6%96%AF>`__\ （Joseph
Nicéphore Nièpce），拍出历史上第一张照片。

2.

他采用的感光剂是\ `氯化银 <http://zh.wikipedia.org/wiki/%E6%B0%AF%E5%8C%96%E9%93%B6>`__\ （silver
chloride）。当光线照射氯化银，后者会分解成纯银和氯气，银金属颗粒呈现黑色。因此，底片颜色越深代表光线越强，颜色越浅代表光线越弱。黑白照片就是这样拍出来。

3.

19世纪中期，人们发现，人眼的圆锥细胞对三种颜色——红、绿、蓝——特别敏感。伟大的英国物理学家麦克斯韦因此假设，红绿蓝作为基色，可以拍出彩色照片。

4.

1861年，在麦克斯韦的指导下，人类的第一张彩色照片诞生了。

采用的方法是在镜头前，分别用红丝带、绿丝带、蓝丝带过滤光线，曝光形成三张底片，然后用三部放映机向同一处投影这三张底片，每部放映机的镜头前都拧上对应颜色的镜头，它们的合成效果就是一张彩照。

5.

真正意义上的彩色胶卷，1933年诞生于柯达公司，底片之上依次有三个感光层，分别对红、绿、蓝三种颜色进行曝光，最后叠加形成一张彩色底片。

6.

二战后，计算机诞生，科学家发现图像可以用数字形式表示。如果将光信号转变成电信号，就可以直接拍出数码照片。这意味着，照相机不再需要胶卷，而是需要一个\ `图像传感器 <http://en.wikipedia.org/wiki/Image_sensor>`__\ （image
sensor）。

7.

图像传感器将光线转化成电流，光线越亮，电流的数值就越大；光线越暗，电流的数值就越小。所以，如果用0到255的范围，表示光线的亮度，最亮的光线是白光，数值是十六进制的FF，最暗的光线是黑光（没有光），数值是十六进制的00。

8.

图像传感器的表面，分成若干个捕捉点，每个点都会产生一个数值，表示该点感受到的光线亮度，这就叫做”像素”。像素越多，图像细节就越丰富。如果一台相机的像素是1600x1200，就说明图像传感器横向有1600个捕捉点，纵向有1200个，合计192万个。

9.

但是，图像传感器有一个很严重的缺陷：它只能感受光的强弱，无法感受光的波长。由于光的颜色由波长决定，所以图像传播器无法记录颜色，也就是说，它只能拍黑白照片，这肯定是不能接受的。

10.

一种解决方案是照相机内置三个图像传感器，分别记录红、绿、蓝三种颜色，然后再将这三个值合并。这种方法能产生最准确的颜色信息，但是成本太高，无法投入实用。

11.

1974年，柯达公司的工程师布赖斯·拜尔提出了一个全新方案，只用一块图像传感器，就解决了颜色的识别。他的做法是在图像传感器前面，设置一个\ `滤光层 <http://en.wikipedia.org/wiki/Color_filter_array>`__\ （Color
filter
array），上面布满了滤光点，与下层的像素一一对应。也就是说，如果传感器是1600x1200像素，那么它的上层就有1600x1200个滤光点。

12.

每个滤光点只能通过红、绿、蓝之中的一种颜色，这意味着在它下层的像素点只可能有四种颜色：红、绿、蓝、黑（表示没有任何光通过）。

13.

不同颜色的滤光点的排列是有规律的：每个绿点的四周，分布着2个红点、2个蓝点、4个绿点。这意味着，整体上，绿点的数量是其他两种颜色点的两倍。这是因为研究显示人眼对绿色最敏感，所以滤光层的绿点最多。

14.

接下来的问题就是，如果一个像素只可能有四种颜色，那么怎么能拍出彩色照片呢？这就是布赖斯·拜尔聪明的地方，前面说了，每个滤光点周围有规律地分布其他颜色的滤光点，那么就有可能结合它们的值，判断出光线本来的颜色。以黄光为例，它由红光和绿光混合而成，那么通过滤光层以后，红点和绿点下面的像素都会有值，但是蓝点下面的像素没有值，因此看一个像素周围的颜色分布——有红色和绿色，但是没有蓝色——就可以推测出来这个像素点的本来颜色应该是黄色。

15.

这种计算颜色的方法，就叫做\ `“去马赛克” <http://en.wikipedia.org/wiki/Demosaicing>`__\ （demosaicing）。上图的下半部分是图像传感器生成的”马赛克”图像，所有的像素只有红、绿、蓝、黑四种颜色；上半部分是”去马赛克”后的效果，这是用算法处理的结果。

16.

虽然，每个像素的颜色都是算出来的，并不是真正的值，但是由于计算的结果相当准确，因此这种做法得到广泛应用。目前，绝大部分的数码相机都采用它，来生成彩色数码照片。高级的数码相机，还提供未经算法处理的原始马赛克图像，这就是\ `raw格式 <http://en.wikipedia.org/wiki/Raw_image_format>`__\ （raw
image format）。

为了纪念发明者布赖斯·拜尔，它被称作”拜尔模式”或\ `“拜尔滤光法” <http://en.wikipedia.org/wiki/Bayer_filter>`__
（Bayer filter）。

（完）

.. note::
    原文地址: http://www.ruanyifeng.com/blog/2012/12/bayer_filter.html 
    作者: 阮一峰 

    编辑: 木书架 http://www.me115.com